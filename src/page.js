function GetCurrentAudioElement(){return window.ap&&window.ap._impl._currentAudioEl?window.ap._impl._currentAudioEl.audioElement||window.ap._impl._currentAudioEl:null}function SendAudioElementEvent(e,t){window.postMessage({type:"AUDIO_ELEMENT_EVENT",eventType:e,audioId:t},window.location.origin)}function InitPage(){var n=["play","pause","stop","playing"],i=window.Audio,o=0,d=(window.Audio=function(e){var t=new i(e),e=Date.now()+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);return t.setAttribute("id",e),t.addEventListener("timeupdate",function(e){var t,n=GetCurrentAudioElement();n===e.target&&1e3<(t=Date.now())-o&&(SendAudioElementEvent(e.type,n.id),o=t)}),n.forEach(function(e){t.addEventListener(e,function(e){var t=GetCurrentAudioElement();t===e.target&&SendAudioElementEvent(e.type,t.id)})}),document.body.appendChild(t),t},window.AudioContext.prototype.createMediaElementSource);window.AudioContext.prototype.createMediaElementSource=function(e){var t;try{t=d.call(this,e)}catch(e){t=d.call(this,new i)}return t}}InitPage();