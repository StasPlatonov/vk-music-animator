const e={visType:"frequencybars",theme:"vktheme",useOpacity:!0,minFreq:20,maxFreq:15e3};var t;function o(){chrome.storage?chrome.storage.local.get((function(e){console.log("chrome.storage.local:"),chrome.runtime.lastError?console.error(chrome.runtime.lastError):console.log(e.settings)})):console.warn("chrome.storage is not accessible, check permissions")}async function n(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e.id}chrome.storage.sync.get({settings:e},(function(e){t=e.settings})),chrome.runtime.onMessage.addListener(((o,n,s)=>"query-active-tab"===o.action?(chrome.tabs.query({active:!0},(e=>{e.length>0&&s({id:e[0].id})})),!0):"get-settings"===o.action?(chrome.storage.sync.get({settings:e},(function(e){t=e.settings,s(e.settings)})),!0):"set-settings"===o.action?(chrome.storage.sync.set({settings:o.settings},(function(){s()})),!0):void 0)),chrome.runtime.onInstalled.addListener((e=>{e.reason===chrome.runtime.OnInstalledReason.INSTALL&&(console.log("Reload all vk.com tabs on install extension"),chrome.tabs.query({url:"*://vk.com/*"}).then((function(e){e.forEach((function(e){chrome.tabs.reload(e.id)}))})))}));